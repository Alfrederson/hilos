<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://unpkg.com/htmx.org@1.9.3"></script>

    <title>ðŸ§µ - {{ .Topic.Subject }}</title>

  </head>
<body>
    <nav class="navbar navbar-light bg-light mb-3 sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand mb-0 h1" href="/">ðŸ§µ</a>
            <span class="navbar nav-item">{{ .Identity.Name }}</span>
        </div>
    </nav>

    <div class="container">
        <a href="/{{ .Topic.ParentId }}">{{ if .Topic.ParentId }} {{ .Topic.ParentId }} {{else}} root {{end}}</a> &gt; {{ .Topic.Id }}
    </div>

    <div class="container">
        <div class="card">
            <div class="card-body">
                <a class="badge bg-light text-dark" href="/by/{{ .Topic.CreatorId }}">
                {{ .Topic.Creator }}~
                </a>
                
                <h5>{{ .Topic.Subject }}</h5>
                <p>{{ .Topic.Content }}</p>

                {{ range $index, $reply := .Topic.Replies }}
                    <div class="card-body">
                        {{if $reply.ReplyCount}}
                        <div class="badge bg-light text-dark">{{ $reply.ReplyCount }} replies</div>
                        {{end}}
                        <a href="/by/{{ $reply.CreatorId }}" class="badge bg-light text-dark">
                            {{ $reply.Creator }}
                        </a><br/>
                        <a href="/{{ $reply.Id }}">
                            {{ $reply.Subject }}
                        </a>                      
                        <div>
                            {{ $reply.Content }}
                        </div>  
                    </div>
                {{ end }}

                <div id="new-post"></div>

                <form hx-post="/visualbasic.exe/post/{{ .Topic.Id }}" hx-target="#new-post" hx-swap="outerHTML">
                    <input type="hidden" value="{{ .Identity.Name }}" name="creator"/>
                    <div class="form-group mb-3">
                        <input type="text" class="form-control" name="subject" placeholder="Enter text" value="re: {{ .Topic.Subject }}">
                    </div>
                    <div class="form-group mb-3">
                        <textarea class="form-control" placeholder="Enter text area" name="content"></textarea>
                    </div>
                    <div class="form-group mb-3">
                        <button type="submit" class="btn btn-light form-control">Submit</button>
                    </div>
                </form>
                <!-- quan-->
            </div>
        </div>
    </div>

</body>
</html>